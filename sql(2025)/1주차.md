## **ğŸ“Œ Week 1: ìœˆë„ìš° í•¨ìˆ˜ (Window Functions)**

---

### **1ï¸âƒ£ ì£¼ìš” ê°œë…**

- **ìœˆë„ìš° í•¨ìˆ˜ (Window Functions)**:
    - `ROW_NUMBER()`, `RANK()`, `DENSE_RANK()`
    - `LAG()`, `LEAD()`
    - `SUM() OVER()`, `AVG() OVER()`
    - `PARTITION BY`, `ORDER BY` ë“±
- í•´ë‹¹ ë¬¸ë²•ì˜ ê°œë…ê³¼ ì‚¬ìš© ì‹œ ì£¼ì˜í•  ì ë“¤ì„ ì •ë¦¬í•˜ì—¬ ê¹ƒí—ˆë¸Œì— ì •ë¦¬í•´ ì£¼ì„¸ìš”.

---

### ìœˆë„ìš° í•¨ìˆ˜ ê°œë…ê³¼ ë¬¸ë²• 

* ìœˆë„ìš° í•¨ìˆ˜ : ê° í–‰ì— ëŒ€í•´ ê²°ê³¼ë¥¼ ìƒì„±í•˜ë©´ì„œë„ ê·¸ë£¹ ë‚´ ë‹¤ë¥¸ í–‰ ì •ë³´ë„ í•¨ê»˜ í™œìš© 

    * ëª¨ë“  í–‰ì— ëŒ€í•´ì„œ ì—°ì‚°ì„ ìˆ˜í–‰ 

* ìœˆë„ìš° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” OVER()ì ˆì„ í¬í•¨ 
    * SUM(), AVG(), COUNT() -> ì§‘ê³„í•¨ìˆ˜ì˜ ê²½ìš°ë„ OVER()ë¥¼ í™œìš©í•˜ë©´ ìœˆë„ìš° í•¨ìˆ˜ë¡œ í™œìš© ê°€ëŠ¥ 

    * RANK(), DENSE_RANK(), ROW_NUMBER() ê°™ì€ ìˆœìœ„ëŠ” OVER()ì ˆì„ í•„ìˆ˜ì ìœ¼ë¡œ í™œìš© í•„ìš”!


#### ì£¼ìš” ìœˆë„ìš° í•¨ìˆ˜ 

* ROW_NUMBER() : ê° ê·¸ë£¹ ë‚´ì—ì„œ í–‰ ë²ˆí˜¸ë¥¼ ë§¤ê¹€(ì¤‘ë³µ ì—†ì´ ìˆœìœ„)

* RANK(), DENSE_RANK() : ìˆœìœ„ë¥¼ ë§¤ê¸°ì§€ë§Œ, ê³µë™ ìˆœìœ„ ì¡´ì¬ ê°€ëŠ¥ 

    * RANK() : ìˆœì„œë¥¼ ê±´ë„ˆëœ€
    * DENSE_RANK() : ìˆœì„œë¥¼ ê±´ë„ˆë›°ì§€ ì•ŠìŒ

* SUM(), AVG(), COUNT() : ëˆ„ì í•© êµ¬í•  ë•Œ ìì£¼ í™œìš©

* LAG() / LEAD() : ë°”ë¡œ ì´ì „ í–‰ / ë‹¤ìŒ í–‰ ê°’ì„ ê°€ì ¸ì˜´

* CUME_DIST() : ëˆ„ì ë¶„í¬ ì˜ë¯¸!!

    * ë°˜í™˜ê°’ ë²”ìœ„ : 0~1
    * ë°˜ë“œì‹œ ORDER BY ì ˆê³¼ ê°™ì´ í™œìš© -> ì˜ë¯¸ìˆëŠ” ê°’ ë„ì¶œ ê°€ëŠ¥ 

* LEAD(expr, N, default) : í˜„ì¬ í–‰ë³´ë‹¤ Nê°œ ë’¤ì— ìˆëŠ” í–‰ì˜ ê°’ ë°˜í™˜ 

* NTH_VALUE(expr, N) : í˜„ëŒ€ ìœˆë„ìš° í”„ë ˆì„ì—ì„œ Në²ˆì§¸ í–‰ì˜ ê°’ ë°˜í™˜

* NTILE(N) : ìœˆë„ìš° ë‚´ ë°ì´í„°ë¥¼ Nê°œì˜ ê·¸ë£¹ë²ˆí˜¸ë¡œ ë‚˜ëˆ„ê³  í˜„ì¬ í•´ë‹¹ í–‰ì´ ì†í•œ í–‰ì˜ ê°’ ë°˜í™˜



### **2ï¸âƒ£ ê³¼ì œ ì•ˆë‚´**

ê° ê°œë…ì— ëŒ€í•´ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ì •ë¦¬í•˜ê³ , í•´ë‹¹ ê°œë…ì„ í™œìš©í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ì„¸ìš”.

### **âœ… ìœˆë„ìš° í•¨ìˆ˜ (Window Functions) í•™ìŠµ ë° ë¬¸ì œ í’€ì´**

ğŸ“– **ê³µì‹ ë¬¸ì„œ ì •ë¦¬í•˜ê¸°**

- **[ê³µì‹ ë¬¸ì„œ ì •ë¦¬ ë²”ìœ„]: ì•„ë˜ì˜ ìˆœì„œëŒ€ë¡œ ë‚´ìš©ì„ í™•ì¸í•˜ì‹œë©´ ì •ë¦¬ì— ë„ì›€ì´ ë˜ì‹¤ ê²ë‹ˆë‹¤.** ë°˜ë“œì‹œ **ëª¨ë“  ë‚´ìš©ì„ ì •ë¦¬í•  í•„ìš”ëŠ” ì—†ìœ¼ë©°** ë³¸ì¸ì—ê²Œ ë„ì›€ì´ ë  ë§Œí•œ ìƒˆë¡œ ë°°ìš´ ë‚´ìš©ë“¤ì„ ì •ë¦¬í•´ì£¼ì‹œë©´ ì¶©ë¶„í•©ë‹ˆë‹¤.
    - ğŸ”— [MySQL ê³µì‹ ë¬¸ì„œ - 14.20.2. Window Function Concepts and Syntax](https://dev.mysql.com/doc/refman/8.0/en/window-functions-usage.html)
    - ğŸ”— [MySQL ê³µì‹ ë¬¸ì„œ - 14.20.1. Window Function Descriptions](https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html)
    - (ğŸ”— [MySQL ê³µì‹ ë¬¸ì„œ - 14.20.4. Named Windows](https://dev.mysql.com/doc/refman/8.0/en/window-functions-named-windows.html) ) - OPTIONAL
    - ğŸ”— [MySQL ê³µì‹ ë¬¸ì„œ - 14.19.1. Aggregate Function Descriptions](https://dev.mysql.com/doc/refman/8.0/en/aggregate-functions.html)
        
        â†’ over_clauseë¥¼ ì´ìš©í•˜ì—¬ ì§‘ê³„í•¨ìˆ˜ë¥¼ ìœˆë„ìš°í•¨ìˆ˜ì²˜ëŸ¼ ì‚¬ìš©í•˜ëŠ” ë¶€ë¶„ë§Œ ê³µë¶€í•´ë³´ì„¸ìš”.
        

ğŸ“ **ë¬¸ì œ í’€ì´**:

- ğŸ”— [LeetCode - Rank Scores](https://leetcode.com/problems/rank-scores/description/) `DENSE_RANK()`

```sql

select score, 
DENSE_RANK() OVER (ORDER BY score DESC) AS 'rank'
from Scores;

```
![My Image](image/12.png)


- ğŸ”— [Solvesql - ë‹¤ìŒë‚ ë„ ì„œìš¸ìˆ²ì˜ ë¯¸ì„¸ë¨¼ì§€ ë†ë„ëŠ” ë‚˜ì¨ ğŸ˜¢](https://solvesql.com/problems/bad-finedust-measure/) `LEAD()`

```sql

select
  measured_at as today,
  DATE(measured_at, '+1 day') as next_day,
  pm10,
  next_value as next_pm10
FROM
  (
    select
      measured_at,
      pm10,
      LEAD(pm10, 1) OVER (
        ORDER BY
          measured_at
      ) AS next_value
    from
      measurements
  )
where
  pm10 < next_value

```
![My Image](image/image.png)


- ğŸ”— [programmers - ê·¸ë£¹ë³„ ì¡°ê±´ì— ë§ëŠ” ì‹ë‹¹ ëª©ë¡ ì¶œë ¥í•˜ê¸°](https://school.programmers.co.kr/learn/courses/30/lessons/131124) (ë„ì „!!)
    
    â†’ ë¬¸ì œë¥¼ í‘¸ëŠ” ë‹¤ì–‘í•œ ë°©ì‹ì´ ìˆì§€ë§Œ, **ìœˆë„ìš° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬** í•´ê²°í•˜ëŠ” ë°©ì‹ì— ëŒ€í•´ ê³ ë¯¼í•´ ë³´ì‹œê¸¸ ë°”ëë‹ˆë‹¤.
    
    *DATE í˜•ì‹ì„ ë¬¸ì œì˜ ì¡°ê±´ì— ë§ê²Œ ì‘ì„±í•´ì£¼ì–´ì•¼ í†µê³¼ë˜ë¯€ë¡œ, DATE_FORMATì„ ì‚¬ìš©í•´ì£¼ì„¸ìš”~